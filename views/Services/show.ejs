<%- include('../partials/header', { title: title }) %>

<div class="container-fluid py-4">
    <div class="row">
        <!-- Main Service Details -->
        <div class="col-lg-8">
            <!-- Service Header -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <div class="d-flex align-items-start">
                            <div class="service-icon me-4">
                                <i class="<%= service.icon %> fa-4x text-primary"></i>
                            </div>
                            <div>
                                <h1 class="h2 mb-2"><%= service.name %></h1>
                                <div class="mb-2">
                                    <span class="badge bg-primary fs-6 me-2"><%= service.category %></span>
                                    <% if (service.isEmergencyService) { %>
                                        <span class="badge bg-danger fs-6">Emergency Service</span>
                                    <% } %>
                                </div>
                                <p class="text-muted mb-0">
                                    <i class="fas fa-paw me-2"></i>
                                    Available for: <%= service.availableFor.includes('All') ? 'All Pets' : service.availableFor.join(', ') %>
                                </p>
                            </div>
                        </div>
                        <div class="text-end">
                            <h3 class="text-primary mb-1"><%= service.formattedPrice %></h3>
                            <p class="text-muted mb-0">
                                <i class="fas fa-clock me-1"></i><%= service.formattedDuration %>
                            </p>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="d-flex gap-2 flex-wrap">
                        <% if (service.requiresAppointment) { %>
                            <form method="POST" action="/services/<%= service._id %>/book">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-calendar-plus me-2"></i>Book Appointment
                                </button>
                            </form>
                        <% } else { %>
                            <span class="badge bg-success fs-6">
                                <i class="fas fa-check me-1"></i>Walk-in Available
                            </span>
                        <% } %>
                        
                        <a href="/services" class="btn btn-outline-secondary">
                            <i class="fas fa-arrow-left me-2"></i>Back to Services
                        </a>

                        <!-- Admin Actions -->
                        <% if (currentUser && currentUser.role === 'admin') { %>
                            <a href="/services/<%= service._id %>/edit" class="btn btn-outline-warning">
                                <i class="fas fa-edit me-2"></i>Edit Service
                            </a>
                        <% } %>
                    </div>
                </div>
            </div>

            <!-- Service Description -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-info-circle me-2"></i>Service Description
                    </h5>
                </div>
                <div class="card-body">
                    <p class="fs-6 lh-lg"><%= service.description %></p>
                </div>
            </div>

            <!-- Preparation Instructions -->
            <% if (service.preparationInstructions) { %>
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-clipboard-list me-2"></i>Preparation Instructions
                    </h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <i class="fas fa-exclamation-circle me-2"></i>
                        <strong>Please read before your appointment:</strong>
                    </div>
                    <p class="mb-0"><%= service.preparationInstructions %></p>
                </div>
            </div>
            <% } %>

            <!-- Service Details Grid -->
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-list me-2"></i>Service Details
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="service-detail-item">
                                <i class="fas fa-clock text-primary me-2"></i>
                                <strong>Duration:</strong> <%= service.formattedDuration %>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="service-detail-item">
                                <i class="fas fa-dollar-sign text-primary me-2"></i>
                                <strong>Price:</strong> <%= service.formattedPrice %>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="service-detail-item">
                                <i class="fas fa-user-md text-primary me-2"></i>
                                <strong>Veterinarian Required:</strong> <%= service.veterinarianRequired %>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="service-detail-item">
                                <i class="fas fa-calendar-check text-primary me-2"></i>
                                <strong>Booking:</strong> <%= service.requiresAppointment ? 'Appointment Required' : 'Walk-in Available' %>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="service-detail-item">
                                <i class="fas fa-redo text-primary me-2"></i>
                                <strong>Follow-up:</strong> <%= service.followUpRequired ? 'Required' : 'Not Required' %>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="service-detail-item">
                                <i class="fas fa-paw text-primary me-2"></i>
                                <strong>Available For:</strong> <%= service.availableFor.join(', ') %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
            <!-- Quick Book Widget -->
            <% if (service.requiresAppointment) { %>
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h6 class="card-title mb-0">
                        <i class="fas fa-calendar-plus me-2"></i>Book This Service
                    </h6>
                </div>
                <div class="card-body">
                    <p class="mb-3">Ready to schedule your appointment?</p>
                    <form method="POST" action="/services/<%= service._id %>/book">
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-calendar-plus me-2"></i>
                                Book Now - <%= service.formattedPrice %>
                            </button>
                        </div>
                    </form>
                    <small class="text-muted mt-2 d-block">
                        <i class="fas fa-info-circle me-1"></i>
                        You'll be redirected to our appointment booking system
                    </small>
                </div>
            </div>
            <% } %>

            <!-- Emergency Notice -->
            <% if (service.isEmergencyService) { %>
            <div class="card mb-4 border-danger">
                <div class="card-header bg-danger text-white">
                    <h6 class="card-title mb-0">
                        <i class="fas fa-exclamation-triangle me-2"></i>Emergency Service
                    </h6>
                </div>
                <div class="card-body">
                    <p class="mb-2">This is an emergency service available 24/7.</p>
                    <div class="d-grid">
                        <a href="tel:+1234567890" class="btn btn-danger">
                            <i class="fas fa-phone me-2"></i>Call Emergency Line
                        </a>
                    </div>
                </div>
            </div>
            <% } %>

            <!-- Related Services -->
            <% if (relatedServices.length > 0) { %>
            <div class="card">
                <div class="card-header">
                    <h6 class="card-title mb-0">
                        <i class="fas fa-heart me-2"></i>Related Services
                    </h6>
                </div>
                <div class="card-body">
                    <% relatedServices.forEach(relatedService => { %>
                        <div class="related-service-item mb-3">
                            <div class="d-flex align-items-start">
                                <i class="<%= relatedService.icon %> text-primary me-2 mt-1"></i>
                                <div class="flex-grow-1">
                                    <h6 class="mb-1">
                                        <a href="/services/<%= relatedService._id %>" class="text-decoration-none">
                                            <%= relatedService.name %>
                                        </a>
                                    </h6>
                                    <small class="text-muted">
                                        <%= relatedService.formattedPrice %> • <%= relatedService.formattedDuration %>
                                    </small>
                                </div>
                            </div>
                        </div>
                        <% if (relatedServices.indexOf(relatedService) < relatedServices.length - 1) { %>
                            <hr class="my-2">
                        <% } %>
                    <% }); %>
                </div>
            </div>
            <% } %>

            <!-- Contact Info -->
            <div class="card mt-4">
                <div class="card-header">
                    <h6 class="card-title mb-0">
                        <i class="fas fa-phone me-2"></i>Contact Information
                    </h6>
                </div>
                <div class="card-body">
                    <div class="contact-item mb-2">
                        <i class="fas fa-phone text-primary me-2"></i>
                        <a href="tel:+1234567890">(123) 456-7890</a>
                    </div>
                    <div class="contact-item mb-2">
                        <i class="fas fa-envelope text-primary me-2"></i>
                        <a href="mailto:info@petcare.com">info@petcare.com</a>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-clock text-primary me-2"></i>
                        <span>Mon-Fri: 8AM-6PM<br>Sat-Sun: 9AM-4PM</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.service-icon {
    min-width: 80px;
    text-align: center;
}

.service-detail-item {
    padding: 0.5rem 0;
    border-bottom: 1px solid #f0f0f0;
}

.service-detail-item:last-child {
    border-bottom: none;
}

.related-service-item:hover {
    background-color: #f8f9fa;
    border-radius: 5px;
    padding: 0.5rem;
    margin: -0.5rem;
}

.contact-item {
    display: flex;
    align-items: flex-start;
}

.contact-item a {
    color: inherit;
    text-decoration: none;
}

.contact-item a:hover {
    color: var(--bs-primary);
    text-decoration: underline;
}
</style>

<%- include('../partials/footer') %> 
